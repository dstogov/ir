--TEST--
010: SCCP (Figure 3.9 from "Combining Analyses, Combining Optimization" by C.Click)
--ARGS--
--save --save-use-lists --save-cfg-map --save-ir-after-gcm
--CODE--
{
	uintptr_t c_1 = 0;
	bool c_2 = 0;
	bool c_3 = 1;
	int32_t c_4 = 1;
	int32_t c_5 = 2;
	l_1 = START(l_20);
	bool d_2 = PARAM(l_1, "cond", 0);
	int32_t d_3 = COPY(c_4);
	l_4 = END(l_1);
	l_5 = LOOP_BEGIN(l_4, l_18);
	int32_t d_6 = PHI(l_5, d_3, d_15);
	bool d_7 = NE(d_6, c_4);
	l_8 = IF(l_5, d_7);
	l_9 = IF_TRUE(l_8);
	int32_t d_10 = COPY(c_5);
	l_11 = END(l_9);
	l_12 = IF_FALSE(l_8);
	l_13 = END(l_12);
	l_14 = MERGE(l_11, l_13);
	int32_t d_15 = PHI(l_14, d_10, d_6);
	l_16 = IF(l_14, d_2);
	l_17 = IF_TRUE(l_16);
	l_18 = LOOP_END(l_17);
	l_19 = IF_FALSE(l_16);
	l_20 = RETURN(l_19, d_15);
}
--EXPECT--
{
	uintptr_t c_1 = 0;
	bool c_2 = 0;
	bool c_3 = 1;
	int32_t c_4 = 1;
	int32_t c_5 = 2;
#BB1: end=l_3, succ(1)=[BB2]
	l_1 = START(l_18); # BLOCK=BB1; USE_LIST(2)=[00002, 00003];
	bool d_2 = PARAM(l_1, "cond", 0); # BLOCK=BB1; USE_LIST(1)=[00014];
	l_3 = END(l_1); # BLOCK=BB1; USE_LIST(1)=[00004];
#BB2: end=l_14, idom=BB1(1), loop=HDR(1), pred(2)=[BB1, BB3], succ(2)=[BB3, BB4]
	l_4 = LOOP_BEGIN(l_3, l_16); # BLOCK=BB2; USE_LIST(1)=[00014];
	NOP;
	NOP;
	NOP;
	NOP;
	NOP;
	NOP;
	NOP;
	NOP;
	NOP;
	l_14 = IF(l_4, d_2); # BLOCK=BB2; USE_LIST(2)=[00015, 00017];
#BB3: end=l_16, idom=BB2(2), loop=BB2(1), pred(1)=[BB2], succ(1)=[BB2]
	l_15 = IF_TRUE(l_14); # BLOCK=BB3; USE_LIST(1)=[00016];
	l_16 = LOOP_END(l_15); # BLOCK=BB3; USE_LIST(1)=[00004];
#BB4: end=l_18, idom=BB2(2), pred(1)=[BB2]
	l_17 = IF_FALSE(l_14); # BLOCK=BB4; USE_LIST(1)=[00018];
	l_18 = RETURN(l_17, c_4); # BLOCK=BB4;
}
